import { NextResponse } from 'next/server'; export const runtime='nodejs'; export const dynamic='force-dynamic'; export async function POST(req: Request){ const { email, tenant, role } = await req.json().catch(()=>({}) as any); const res=NextResponse.json({ ok:true, email:email??null, tenant:tenant??null, role: role ?? 'user' }); res.cookies.set({ name:'demo_auth', value:'1', httpOnly:true, sameSite:'lax', path:'/', maxAge:60*60*8 }); if (tenant) res.cookies.set({ name:'tenant', value:String(tenant), path:'/', maxAge:60*60*8 }); res.cookies.set({ name:'role', value: role === 'admin' ? 'admin' : 'user', path:'/', maxAge:60*60*8 }); res.cookies.set({ name:'email', value: String(email||''), path:'/', maxAge:60*60*8 }); return res; }
