type Profile = { avatarUrl?: string; email?: string|null }; const g = global as any; if (!g.__PROFILE__) g.__PROFILE__ = {} as Record<string,Profile>; export function getProfile(email:string|undefined){ return g.__PROFILE__[email||'anon'] || {}; } export function setProfile(email:string|undefined, p:Profile){ g.__PROFILE__[email||'anon'] = { ...(g.__PROFILE__[email||'anon']||{}), ...p }; return g.__PROFILE__[email||'anon']; }
