{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/sufi-mac-pro/Documents/2.%20Other%20Drive/0000.%20WebDesign/iiot-ygen/components/Sparkline.tsx"],"sourcesContent":["'use client'; import { TelemetryPoint } from '@/lib/types'; export function Sparkline({data,width=280,height=70}:{data:TelemetryPoint[];width?:number;height?:number;}){ if(!data||data.length<2) return <svg width={width} height={height}></svg>; const xs=data.map(p=>p.ts),ys=data.map(p=>p.v); const minX=Math.min(...xs),maxX=Math.max(...xs),minY=Math.min(...ys),maxY=Math.max(...ys),pad=4; const sx=(x:number)=> pad+(x-minX)/(maxX-minX||1)*(width-pad*2); const sy=(y:number)=> height-pad-(y-minY)/(maxY-minY||1)*(height-pad*2); const d=data.map((p,i)=>`${i?'L':'M'}${sx(p.ts).toFixed(1)},${sy(p.v).toFixed(1)}`).join(' '); const last=data[data.length-1]; return <svg width={width} height={height}><path d={d} fill='none' stroke='currentColor' strokeWidth='2' opacity='.9'/><circle cx={sx(last.ts)} cy={sy(last.v)} r='2.5'/></svg>; }\n"],"names":[],"mappings":";;;;;AAAA;;AAAmE,SAAS,UAAU,EAAC,IAAI,EAAC,QAAM,GAAG,EAAC,SAAO,EAAE,EAAuD;IAAG,IAAG,CAAC,QAAM,KAAK,MAAM,GAAC,GAAG,qBAAO,6LAAC;QAAI,OAAO;QAAO,QAAQ;;;;;;IAAgB,MAAM,KAAG,KAAK,GAAG,CAAC,CAAA,IAAG,EAAE,EAAE,GAAE,KAAG,KAAK,GAAG,CAAC,CAAA,IAAG,EAAE,CAAC;IAAG,MAAM,OAAK,KAAK,GAAG,IAAI,KAAI,OAAK,KAAK,GAAG,IAAI,KAAI,OAAK,KAAK,GAAG,IAAI,KAAI,OAAK,KAAK,GAAG,IAAI,KAAI,MAAI;IAAG,MAAM,KAAG,CAAC,IAAY,MAAI,CAAC,IAAE,IAAI,IAAE,CAAC,OAAK,QAAM,CAAC,IAAE,CAAC,QAAM,MAAI,CAAC;IAAG,MAAM,KAAG,CAAC,IAAY,SAAO,MAAI,CAAC,IAAE,IAAI,IAAE,CAAC,OAAK,QAAM,CAAC,IAAE,CAAC,SAAO,MAAI,CAAC;IAAG,MAAM,IAAE,KAAK,GAAG,CAAC,CAAC,GAAE,IAAI,GAAG,IAAE,MAAI,MAAM,GAAG,EAAE,EAAE,EAAE,OAAO,CAAC,GAAG,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,OAAO,CAAC,IAAI,EAAE,IAAI,CAAC;IAAM,MAAM,OAAK,IAAI,CAAC,KAAK,MAAM,GAAC,EAAE;IAAE,qBAAO,6LAAC;QAAI,OAAO;QAAO,QAAQ;;0BAAQ,6LAAC;gBAAK,GAAG;gBAAG,MAAK;gBAAO,QAAO;gBAAe,aAAY;gBAAI,SAAQ;;;;;;0BAAM,6LAAC;gBAAO,IAAI,GAAG,KAAK,EAAE;gBAAG,IAAI,GAAG,KAAK,CAAC;gBAAG,GAAE;;;;;;;;;;;;AAAe;KAAlvB","debugId":null}},
    {"offset": {"line": 67, "column": 0}, "map": {"version":3,"sources":["file:///Users/sufi-mac-pro/Documents/2.%20Other%20Drive/0000.%20WebDesign/iiot-ygen/components/StatusBadge.tsx"],"sourcesContent":["'use client'; import { EquipmentStatus } from '@/lib/types'; const color:Record<EquipmentStatus,string>={OK:'background:#22c55e;color:#04110a;',MAINTENANCE:'background:#f59e0b;color:#1a1206;',FAULT:'background:#ef4444;color:#1a0a0a;',EMERGENCY:'background:#be123c;color:#fff1f2;',OFFLINE:'background:#94a3b8;color:#0b1015;'}; export function StatusBadge({status}:{status:EquipmentStatus}){ const style=Object.fromEntries(color[status].split(';').filter(Boolean).map(s=>s.trim().split(':'))); return <span className='badge' style={style as any}><i className='dot' style={{background:'currentColor'}}/> {status}</span>; }\n"],"names":[],"mappings":";;;;;AAAA;;AAA6D,MAAM,QAAqC;IAAC,IAAG;IAAoC,aAAY;IAAoC,OAAM;IAAoC,WAAU;IAAoC,SAAQ;AAAmC;AAAU,SAAS,YAAY,EAAC,MAAM,EAA0B;IAAG,MAAM,QAAM,OAAO,WAAW,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,MAAM,CAAC,SAAS,GAAG,CAAC,CAAA,IAAG,EAAE,IAAI,GAAG,KAAK,CAAC;IAAQ,qBAAO,6LAAC;QAAK,WAAU;QAAQ,OAAO;;0BAAc,6LAAC;gBAAE,WAAU;gBAAM,OAAO;oBAAC,YAAW;gBAAc;;;;;;YAAI;YAAE;;;;;;;AAAgB;KAApR","debugId":null}},
    {"offset": {"line": 116, "column": 0}, "map": {"version":3,"sources":["file:///Users/sufi-mac-pro/Documents/2.%20Other%20Drive/0000.%20WebDesign/iiot-ygen/components/TaskModal.tsx"],"sourcesContent":["'use client';\nimport React from 'react';\nexport function TaskModal({ deviceId, onCreated }:{ deviceId:string; onCreated:()=>void }){\n  const [open,setOpen]=React.useState(false); const [notes,setNotes]=React.useState(''); const [busy,setBusy]=React.useState(false);\n  async function submit(){ setBusy(true); try{ await fetch('/api/work-orders',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({deviceId,notes})}); setOpen(false); setNotes(''); onCreated(); } finally{ setBusy(false);} }\n  return (<>\n    <button className=\"btn btn-primary\" onClick={()=>setOpen(true)}>ADD TASK</button>\n    {open && (<div className=\"modal-backdrop\" onClick={()=>!busy&&setOpen(false)}>\n      <div className=\"modal\" onClick={e=>e.stopPropagation()}>\n        <h3 style={{marginTop:0}}>Assign maintenance task</h3>\n        <textarea className=\"input\" rows={4} placeholder=\"Notes, checklist\" value={notes} onChange={e=>setNotes(e.target.value)}/>\n        <div className=\"row\" style={{justifyContent:'flex-end'}}>\n          <button className=\"btn\" onClick={()=>setOpen(false)} disabled={busy}>Cancel</button>\n          <button className=\"btn btn-primary\" onClick={submit} disabled={busy}>{busy?'Saving…':'Create'}</button>\n        </div>\n      </div>\n    </div>)}\n  </>);\n}\n"],"names":[],"mappings":";;;;;AACA;;;AADA;;AAEO,SAAS,UAAU,EAAE,QAAQ,EAAE,SAAS,EAA0C;;IACvF,MAAM,CAAC,MAAK,QAAQ,GAAC,wKAAK,CAAC,QAAQ,CAAC;IAAQ,MAAM,CAAC,OAAM,SAAS,GAAC,wKAAK,CAAC,QAAQ,CAAC;IAAK,MAAM,CAAC,MAAK,QAAQ,GAAC,wKAAK,CAAC,QAAQ,CAAC;IAC3H,eAAe;QAAU,QAAQ;QAAO,IAAG;YAAE,MAAM,MAAM,oBAAmB;gBAAC,QAAO;gBAAO,SAAQ;oBAAC,gBAAe;gBAAkB;gBAAE,MAAK,KAAK,SAAS,CAAC;oBAAC;oBAAS;gBAAK;YAAE;YAAI,QAAQ;YAAQ,SAAS;YAAK;QAAa,SAAS;YAAE,QAAQ;QAAO;IAAE;IACvP,qBAAQ;;0BACN,6LAAC;gBAAO,WAAU;gBAAkB,SAAS,IAAI,QAAQ;0BAAO;;;;;;YAC/D,sBAAS,6LAAC;gBAAI,WAAU;gBAAiB,SAAS,IAAI,CAAC,QAAM,QAAQ;0BACpE,cAAA,6LAAC;oBAAI,WAAU;oBAAQ,SAAS,CAAA,IAAG,EAAE,eAAe;;sCAClD,6LAAC;4BAAG,OAAO;gCAAC,WAAU;4BAAC;sCAAG;;;;;;sCAC1B,6LAAC;4BAAS,WAAU;4BAAQ,MAAM;4BAAG,aAAY;4BAAmB,OAAO;4BAAO,UAAU,CAAA,IAAG,SAAS,EAAE,MAAM,CAAC,KAAK;;;;;;sCACtH,6LAAC;4BAAI,WAAU;4BAAM,OAAO;gCAAC,gBAAe;4BAAU;;8CACpD,6LAAC;oCAAO,WAAU;oCAAM,SAAS,IAAI,QAAQ;oCAAQ,UAAU;8CAAM;;;;;;8CACrE,6LAAC;oCAAO,WAAU;oCAAkB,SAAS;oCAAQ,UAAU;8CAAO,OAAK,YAAU;;;;;;;;;;;;;;;;;;;;;;;;;AAK/F;GAhBgB;KAAA","debugId":null}},
    {"offset": {"line": 247, "column": 0}, "map": {"version":3,"sources":["file:///Users/sufi-mac-pro/Documents/2.%20Other%20Drive/0000.%20WebDesign/iiot-ygen/lib/client-sse.ts"],"sourcesContent":["'use client'; export type SSEHandler=(data:any)=>void; export function subscribeSSE(path:string,onData:SSEHandler){ const es=new EventSource(path); es.onmessage=(e)=>{ try{ onData(JSON.parse(e.data)); }catch{} }; return ()=>es.close(); }\n"],"names":[],"mappings":";;;;AAAA;AAA8D,SAAS,aAAa,IAAW,EAAC,MAAiB;IAAG,MAAM,KAAG,IAAI,YAAY;IAAO,GAAG,SAAS,GAAC,CAAC;QAAM,IAAG;YAAE,OAAO,KAAK,KAAK,CAAC,EAAE,IAAI;QAAI,EAAC,OAAK,CAAC;IAAE;IAAG,OAAO,IAAI,GAAG,KAAK;AAAI","debugId":null}},
    {"offset": {"line": 268, "column": 0}, "map": {"version":3,"sources":["file:///Users/sufi-mac-pro/Documents/2.%20Other%20Drive/0000.%20WebDesign/iiot-ygen/app/equipment/%5Bid%5D/page.tsx"],"sourcesContent":["'use client';\nimport { useParams } from 'next/navigation'; import { useEffect, useState } from 'react';\nimport { Device, TelemetryPoint } from '@/lib/types'; import { Sparkline } from '@/components/Sparkline'; import { StatusBadge } from '@/components/StatusBadge'; import { TaskModal } from '@/components/TaskModal'; import { subscribeSSE } from '@/lib/client-sse';\ntype DeviceWithData = { device: Device; telemetry: TelemetryPoint[]; };\nasync function fetchDevice(id:string): Promise<DeviceWithData|null>{ const res=await fetch(`/api/devices?deviceId=${encodeURIComponent(id)}`,{cache:'no-store'}); const json=await res.json(); return (json.devices&&json.devices[0])||null; }\nexport default function DevicePage(){ const { id } = useParams<{id:string}>(); const [device,setDevice]=useState<Device|null>(null); const [series,setSeries]=useState<TelemetryPoint[]>([]);\n  useEffect(()=>{ fetchDevice(id).then(dd=>{ if(dd){ setDevice(dd.device); setSeries(dd.telemetry);} }); },[id]);\n  useEffect(()=>{ const unsub=subscribeSSE('/api/realtime',(msg)=>{ if(!device) return; if(msg.type==='device_update'&&msg.deviceId===device.id) setDevice(msg.device); else if(msg.type==='telemetry'&&msg.deviceId===device.id){ setSeries(prev=>{ const next=[...prev,msg.point]; if(next.length>300) next.shift(); return next; }); } }); return ()=>unsub(); },[device]);\n  if(!device) return <div className='card'>Loading…</div>;\n  return (<div className='grid' style={{gridTemplateColumns:'repeat(12, 1fr)'}}>\n    <section className='card' style={{gridColumn:'span 8'}}><h2 style={{marginTop:0}}>{device.name} <span style={{opacity:.6,fontWeight:400}}>• {device.model}</span></h2><div style={{marginBottom:12}}><StatusBadge status={device.status}/></div><Sparkline data={series} width={760} height={200}/></section>\n    <aside className='card' style={{gridColumn:'span 4'}}><h3>Actions</h3><TaskModal deviceId={device.id} onCreated={()=>{}}/><div style={{height:12}}/><div className='row'>\n      <button className='btn' onClick={()=>fetch('/api/simulate',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({deviceId:device.id,status:'OK'})})}>Set OK</button>\n      <button className='btn' onClick={()=>fetch('/api/simulate',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({deviceId:device.id,status:'MAINTENANCE'})})}>Maintenance</button>\n      <button className='btn btn-danger' onClick={()=>fetch('/api/simulate',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({deviceId:device.id,status:'FAULT'})})}>Fault</button>\n    </div></aside></div>); }\n"],"names":[],"mappings":"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","debugId":null}}]
}