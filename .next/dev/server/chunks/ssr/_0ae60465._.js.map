{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/sufi-mac-pro/Documents/2.%20Other%20Drive/0000.%20WebDesign/iiot-ygen/lib/client-sse.ts"],"sourcesContent":["'use client'; export type SSEHandler=(data:any)=>void; export function subscribeSSE(path:string,onData:SSEHandler){ const es=new EventSource(path); es.onmessage=(e)=>{ try{ onData(JSON.parse(e.data)); }catch{} }; return ()=>es.close(); }\n"],"names":[],"mappings":";;;;AAAA;AAA8D,SAAS,aAAa,IAAW,EAAC,MAAiB;IAAG,MAAM,KAAG,IAAI,YAAY;IAAO,GAAG,SAAS,GAAC,CAAC;QAAM,IAAG;YAAE,OAAO,KAAK,KAAK,CAAC,EAAE,IAAI;QAAI,EAAC,OAAK,CAAC;IAAE;IAAG,OAAO,IAAI,GAAG,KAAK;AAAI","debugId":null}},
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///Users/sufi-mac-pro/Documents/2.%20Other%20Drive/0000.%20WebDesign/iiot-ygen/components/StatusBadge.tsx"],"sourcesContent":["'use client'; import { EquipmentStatus } from '@/lib/types'; const color:Record<EquipmentStatus,string>={OK:'background:#22c55e;color:#04110a;',MAINTENANCE:'background:#f59e0b;color:#1a1206;',FAULT:'background:#ef4444;color:#1a0a0a;',EMERGENCY:'background:#be123c;color:#fff1f2;',OFFLINE:'background:#94a3b8;color:#0b1015;'}; export function StatusBadge({status}:{status:EquipmentStatus}){ const style=Object.fromEntries(color[status].split(';').filter(Boolean).map(s=>s.trim().split(':'))); return <span className='badge' style={style as any}><i className='dot' style={{background:'currentColor'}}/> {status}</span>; }\n"],"names":[],"mappings":";;;;;AAAA;;AAA6D,MAAM,QAAqC;IAAC,IAAG;IAAoC,aAAY;IAAoC,OAAM;IAAoC,WAAU;IAAoC,SAAQ;AAAmC;AAAU,SAAS,YAAY,EAAC,MAAM,EAA0B;IAAG,MAAM,QAAM,OAAO,WAAW,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,MAAM,CAAC,SAAS,GAAG,CAAC,CAAA,IAAG,EAAE,IAAI,GAAG,KAAK,CAAC;IAAQ,qBAAO,8OAAC;QAAK,WAAU;QAAQ,OAAO;;0BAAc,8OAAC;gBAAE,WAAU;gBAAM,OAAO;oBAAC,YAAW;gBAAc;;;;;;YAAI;YAAE;;;;;;;AAAgB","debugId":null}},
    {"offset": {"line": 65, "column": 0}, "map": {"version":3,"sources":["file:///Users/sufi-mac-pro/Documents/2.%20Other%20Drive/0000.%20WebDesign/iiot-ygen/components/Sparkline.tsx"],"sourcesContent":["'use client'; import { TelemetryPoint } from '@/lib/types'; export function Sparkline({data,width=280,height=70}:{data:TelemetryPoint[];width?:number;height?:number;}){ if(!data||data.length<2) return <svg width={width} height={height}></svg>; const xs=data.map(p=>p.ts),ys=data.map(p=>p.v); const minX=Math.min(...xs),maxX=Math.max(...xs),minY=Math.min(...ys),maxY=Math.max(...ys),pad=4; const sx=(x:number)=> pad+(x-minX)/(maxX-minX||1)*(width-pad*2); const sy=(y:number)=> height-pad-(y-minY)/(maxY-minY||1)*(height-pad*2); const d=data.map((p,i)=>`${i?'L':'M'}${sx(p.ts).toFixed(1)},${sy(p.v).toFixed(1)}`).join(' '); const last=data[data.length-1]; return <svg width={width} height={height}><path d={d} fill='none' stroke='currentColor' strokeWidth='2' opacity='.9'/><circle cx={sx(last.ts)} cy={sy(last.v)} r='2.5'/></svg>; }\n"],"names":[],"mappings":";;;;;AAAA;;AAAmE,SAAS,UAAU,EAAC,IAAI,EAAC,QAAM,GAAG,EAAC,SAAO,EAAE,EAAuD;IAAG,IAAG,CAAC,QAAM,KAAK,MAAM,GAAC,GAAG,qBAAO,8OAAC;QAAI,OAAO;QAAO,QAAQ;;;;;;IAAgB,MAAM,KAAG,KAAK,GAAG,CAAC,CAAA,IAAG,EAAE,EAAE,GAAE,KAAG,KAAK,GAAG,CAAC,CAAA,IAAG,EAAE,CAAC;IAAG,MAAM,OAAK,KAAK,GAAG,IAAI,KAAI,OAAK,KAAK,GAAG,IAAI,KAAI,OAAK,KAAK,GAAG,IAAI,KAAI,OAAK,KAAK,GAAG,IAAI,KAAI,MAAI;IAAG,MAAM,KAAG,CAAC,IAAY,MAAI,CAAC,IAAE,IAAI,IAAE,CAAC,OAAK,QAAM,CAAC,IAAE,CAAC,QAAM,MAAI,CAAC;IAAG,MAAM,KAAG,CAAC,IAAY,SAAO,MAAI,CAAC,IAAE,IAAI,IAAE,CAAC,OAAK,QAAM,CAAC,IAAE,CAAC,SAAO,MAAI,CAAC;IAAG,MAAM,IAAE,KAAK,GAAG,CAAC,CAAC,GAAE,IAAI,GAAG,IAAE,MAAI,MAAM,GAAG,EAAE,EAAE,EAAE,OAAO,CAAC,GAAG,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,OAAO,CAAC,IAAI,EAAE,IAAI,CAAC;IAAM,MAAM,OAAK,IAAI,CAAC,KAAK,MAAM,GAAC,EAAE;IAAE,qBAAO,8OAAC;QAAI,OAAO;QAAO,QAAQ;;0BAAQ,8OAAC;gBAAK,GAAG;gBAAG,MAAK;gBAAO,QAAO;gBAAe,aAAY;gBAAI,SAAQ;;;;;;0BAAM,8OAAC;gBAAO,IAAI,GAAG,KAAK,EAAE;gBAAG,IAAI,GAAG,KAAK,CAAC;gBAAG,GAAE;;;;;;;;;;;;AAAe","debugId":null}},
    {"offset": {"line": 122, "column": 0}, "map": {"version":3,"sources":["file:///Users/sufi-mac-pro/Documents/2.%20Other%20Drive/0000.%20WebDesign/iiot-ygen/components/DeviceCard.tsx"],"sourcesContent":["'use client'; import Link from 'next/link'; import { Device, TelemetryPoint } from '@/lib/types'; import { StatusBadge } from '@/components/StatusBadge'; import { Sparkline } from '@/components/Sparkline'; export function DeviceCard({device,data}:{device:Device;data:TelemetryPoint[];}){ return (<div className='card' style={{display:'grid',gridTemplateColumns:'1fr auto',gap:12}}><div><div style={{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:8}}><div style={{fontWeight:700}}>{device.name} <span style={{opacity:.6,fontWeight:400}}>• {device.model}</span></div><StatusBadge status={device.status}/></div><div style={{opacity:.7,fontSize:12,marginBottom:6}}>Device ID: {device.id}</div><Sparkline data={data} width={280} height={70}/></div><div style={{display:'grid',alignContent:'space-between'}}><div><div className='kpi'>{(device.lastValue ?? 0).toFixed(2)}</div><div style={{opacity:.6,fontSize:12}}>last reading</div></div><Link className='btn' href={`/equipment/${encodeURIComponent(device.id)}`}>Open</Link></div></div>); }\n"],"names":[],"mappings":";;;;;AAAc;AAAoF;AAAwD;AAA1J;;;;;AAAqN,SAAS,WAAW,EAAC,MAAM,EAAC,IAAI,EAAwC;IAAG,qBAAQ,8OAAC;QAAI,WAAU;QAAO,OAAO;YAAC,SAAQ;YAAO,qBAAoB;YAAW,KAAI;QAAE;;0BAAG,8OAAC;;kCAAI,8OAAC;wBAAI,OAAO;4BAAC,SAAQ;4BAAO,gBAAe;4BAAgB,YAAW;4BAAS,cAAa;wBAAC;;0CAAG,8OAAC;gCAAI,OAAO;oCAAC,YAAW;gCAAG;;oCAAI,OAAO,IAAI;oCAAC;kDAAC,8OAAC;wCAAK,OAAO;4CAAC,SAAQ;4CAAG,YAAW;wCAAG;;4CAAG;4CAAG,OAAO,KAAK;;;;;;;;;;;;;0CAAc,8OAAC,yIAAW;gCAAC,QAAQ,OAAO,MAAM;;;;;;;;;;;;kCAAS,8OAAC;wBAAI,OAAO;4BAAC,SAAQ;4BAAG,UAAS;4BAAG,cAAa;wBAAC;;4BAAG;4BAAY,OAAO,EAAE;;;;;;;kCAAO,8OAAC,qIAAS;wBAAC,MAAM;wBAAM,OAAO;wBAAK,QAAQ;;;;;;;;;;;;0BAAW,8OAAC;gBAAI,OAAO;oBAAC,SAAQ;oBAAO,cAAa;gBAAe;;kCAAG,8OAAC;;0CAAI,8OAAC;gCAAI,WAAU;0CAAO,CAAC,OAAO,SAAS,IAAI,CAAC,EAAE,OAAO,CAAC;;;;;;0CAAS,8OAAC;gCAAI,OAAO;oCAAC,SAAQ;oCAAG,UAAS;gCAAE;0CAAG;;;;;;;;;;;;kCAAwB,8OAAC,uKAAI;wBAAC,WAAU;wBAAM,MAAM,CAAC,WAAW,EAAE,mBAAmB,OAAO,EAAE,GAAG;kCAAE;;;;;;;;;;;;;;;;;;AAA0B","debugId":null}},
    {"offset": {"line": 283, "column": 0}, "map": {"version":3,"sources":["file:///Users/sufi-mac-pro/Documents/2.%20Other%20Drive/0000.%20WebDesign/iiot-ygen/app/dashboard/page.tsx"],"sourcesContent":["'use client';\nimport { useEffect, useMemo, useState } from 'react';\nimport { Device, EquipmentStatus, TelemetryPoint } from '@/lib/types';\nimport { subscribeSSE } from '@/lib/client-sse';\nimport { DeviceCard } from '@/components/DeviceCard';\ntype DeviceWithData = { device: Device; telemetry: TelemetryPoint[]; };\nasync function fetchDevices(statusFilter: EquipmentStatus|''): Promise<DeviceWithData[]>{ const qs=statusFilter?`?status=${encodeURIComponent(statusFilter)}`:''; const res=await fetch(`/api/devices${qs}`,{cache:'no-store'}); const json=await res.json(); return json.devices as DeviceWithData[]; }\nexport default function DashboardPage(){\n  const [statusFilter,setStatusFilter]=useState<EquipmentStatus|''>(''); const [items,setItems]=useState<DeviceWithData[]>([]); const [loading,setLoading]=useState(true);\n  const load=async()=>{ setLoading(true); try{ setItems(await fetchDevices(statusFilter)); } finally{ setLoading(false);} }; useEffect(()=>{ load(); },[statusFilter]);\n  useEffect(()=>{ const unsub=subscribeSSE('/api/realtime',(msg)=>{ if(msg.type==='device_update'){ setItems(prev=>prev.map(x=>x.device.id===msg.deviceId?{...x,device:msg.device}:x)); } else if(msg.type==='telemetry'){ setItems(prev=>prev.map(x=>{ if(x.device.id!==msg.deviceId) return x; const next=[...x.telemetry,msg.point]; if(next.length>300) next.shift(); return {...x,telemetry:next,device:{...x.device,lastValue:msg.point.v,lastTs:new Date(msg.point.ts).toISOString()}}; })); } }); return ()=>unsub(); },[]);\n  const stats=useMemo(()=>{ const total=items.length; const counts={OK:0,MAINTENANCE:0,FAULT:0,EMERGENCY:0,OFFLINE:0} as Record<EquipmentStatus,number>; for(const it of items) counts[it.device.status]++; return { total, counts }; },[items]);\n  return (<div className=\"grid\" style={{gridTemplateColumns:'repeat(12, 1fr)'}}>\n    <section className=\"card\" style={{gridColumn:'span 12'}}>\n      <div className=\"row\" style={{justifyContent:'space-between'}}>\n        <h2 style={{margin:0}}>Live Equipment Dashboard</h2>\n        <div className=\"row\">\n          <select value={statusFilter} onChange={e=>setStatusFilter(e.target.value as any)}>\n            <option value=\"\">All statuses</option><option value=\"OK\">OK</option><option value=\"MAINTENANCE\">MAINTENANCE</option><option value=\"FAULT\">FAULT</option><option value=\"EMERGENCY\">EMERGENCY</option><option value=\"OFFLINE\">OFFLINE</option>\n          </select>\n          <button className=\"btn\" onClick={load} disabled={loading}>{loading?'Loading…':'Refresh'}</button>\n        </div>\n      </div>\n      <div className=\"row\" style={{marginTop:12}}>\n        <div className=\"card\" style={{flex:'1 1 0'}}><div>OK</div><div className=\"kpi\" style={{color:'#22c55e'}}>{stats.counts.OK}</div></div>\n        <div className=\"card\" style={{flex:'1 1 0'}}><div>MAINTENANCE</div><div className=\"kpi\" style={{color:'#f59e0b'}}>{stats.counts.MAINTENANCE}</div></div>\n        <div className=\"card\" style={{flex:'1 1 0'}}><div>FAULT</div><div className=\"kpi\" style={{color:'#ef4444'}}>{stats.counts.FAULT}</div></div>\n        <div className=\"card\" style={{flex:'1 1 0'}}><div>EMERGENCY</div><div className=\"kpi\" style={{color:'#be123c'}}>{stats.counts.EMERGENCY}</div></div>\n        <div className=\"card\" style={{flex:'1 1 0'}}><div>OFFLINE</div><div className=\"kpi\" style={{color:'#94a3b8'}}>{stats.counts.OFFLINE}</div></div>\n        <div className=\"card\" style={{flex:'1 1 0'}}><div>TOTAL</div><div className=\"kpi\">{stats.total}</div></div>\n      </div>\n    </section>\n    <section className=\"card\" style={{gridColumn:'span 12'}}>\n      <h3>Devices</h3>\n      <div className=\"grid\" style={{gridTemplateColumns:'repeat(2, 1fr)'}}>\n        {items.map(({device,telemetry})=>(<DeviceCard key={device.id} device={device} data={telemetry}/>))}\n      </div>\n    </section>\n  </div>);}\n"],"names":[],"mappings":"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","debugId":null}}]
}